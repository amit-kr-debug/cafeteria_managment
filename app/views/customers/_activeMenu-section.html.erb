<table class="table table-striped menus-table">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Description</th>
      <th scope="col">Price</th>
      <th scope="col">Qunatity</th>
      <th scope="col">Total</th>
    </tr>
  </thead>
  <tbody>
  <% menu.each do |item| %>
    <tr>
      <td><%= item.item_name%></td>
      <td><%= item.description %></td>
      <td id="<%= item.id.to_s+"price" %>" ><%= item.price %></td>
      <td>
      <%= form_with(url: "/customers/#{item.id}", method: "put") do %>
               <div class="quantity">
                  <button class="plus-btn cart-btn" type="button" name="button" onclick="increase(<%= item.id %>); this.form.submit();">
                    <img src="plus.svg" alt="">
                  </button>
                  <%if user.cart["#{item.id}"] != nil%>
                    <input type="text" id="<%= item.id %>" name="quantity" value="<%= user.cart["#{item.id}"] %>">
                  <%else%>
                    <input type="text" id="<%= item.id %>" name="quantity" value="0">
                  <%end%>
                  <button class="minus-btn cart-btn" type="button" name="button" onclick="decrease(<%= item.id %>); this.form.submit();">
                    <img src="minus.svg" alt="">
                  </button>
               </div>
               <% end %>
            </td>
            <%if user.cart["#{item.id}"] != nil%>
              <td id="<%= item.id.to_s+"sub-total" %>" ><%= item.price.to_i*user.cart["#{item.id}"].to_i%></td>
            <%else%>
              <td id="<%= item.id.to_s+"sub-total" %>">0</td>
            <%end%>
    </tr>
  <% end %>
  </tbody>
</table>

<script type="text/javascript">
    function increase(item_id) {
      quantity = document.getElementById(item_id);
      quantity.value++;
      price = document.getElementById(String(item_id)+"price").innerHTML;
      console.log(quantity, price)
      document.getElementById(String(item_id)+"sub-total").innerHTML = Number(quantity.value)*Number(price);
    }
    function decrease(item_id) {
      quantity = document.getElementById(item_id);
      quantity.value--;
      if (quantity.value>0)
      {
      }

      else{
        quantity.value = 0;
      }
      price = document.getElementById(String(item_id)+"price").innerHTML;
      console.log(quantity, price)
      document.getElementById(String(item_id)+"sub-total").innerHTML = Number(quantity.value)*Number(price);
    }
</script>
